"use strict";(self.webpackChunkproject_bni_dashboard=self.webpackChunkproject_bni_dashboard||[]).push([[8759],{18759:function(e,n,o){o.d(n,{Z:function(){return R}});var t=o(42982),r=o(1413),a=o(55159),i=o(34148),l=o(46759),c=o.n(l),s=o(85640),d=o(43015),u=o(46417),m=function(e){var n,o=e.balanceLocal,t=e.isHomePage,r=(0,s.useIntl)();return(0,u.jsxs)(i.Flex,{flexDirection:{base:"row",md:t?"row":"column"},justifyContent:"space-between",children:[(0,u.jsx)(i.Text,{fontSize:14,children:r.formatMessage({id:"totalLoan"})}),(0,u.jsxs)(i.Text,{fontSize:18,fontWeight:700,children:["IDR ",null!==(n=(0,d.a6)(o))&&void 0!==n?n:"-"]})]})},x=o(70885),f=o(53189),p=o(92988),h=function(e){var n=e.type,o=e.amount,t=e.conversionAmount,r=e.totalAccount,a=e.currency;return(0,u.jsxs)(i.Flex,{direction:"column",pr:10,children:[(0,u.jsx)(i.Text,{fontSize:"xs",fontWeight:"semibold",color:"orange.500",children:n}),(0,u.jsxs)(i.Text,{fontWeight:"extrabold",children:[a," ",o]}),t&&"IDR"!==a?(0,u.jsxs)(i.Text,{fontWeight:"bold",children:["IDR ",t]}):null,(0,u.jsx)(i.Text,{fontSize:"sm",fontWeight:"bold",color:"grey",children:r})]})},g=o(32916),b=function(e){var n,o,t=e.row,a=(0,i.useMediaQuery)("(max-width: 768px)"),l=(0,x.Z)(a,1)[0],d=(0,s.useIntl)().formatMessage,m=c().useState(!0),f=(0,x.Z)(m,2),p=f[0],h=f[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.Tr,(0,r.Z)((0,r.Z)({},t.getRowProps()),{},{children:[t.cells.map((function(e){return!l||e.column.Header!==d({id:"limitLoan"})&&e.column.Header!==d({id:"currency"})?(0,u.jsx)(i.Td,(0,r.Z)((0,r.Z)({borderBottom:"1px",borderBottomColor:"orange.100"},e.getCellProps()),{},{children:(0,u.jsx)(i.Text,{fontWeight:l?"bold":"normal",children:e.render("Cell")})})):null})),l?(0,u.jsx)(i.Td,{borderBottom:"1px",borderBottomColor:"orange.100",onClick:function(){return h(!p)},children:p?(0,u.jsx)(g.bTu,{style:{cursor:"pointer",color:"#E55300"}}):(0,u.jsx)(g.rH8,{style:{cursor:"pointer",color:"#E55300"}})}):null]})),l&&!p?(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.Tr,{children:[(0,u.jsx)(i.Td,{borderBottomColor:"transparent",fontSize:"xs",fontWeight:"bold",color:"grey",children:(0,u.jsx)(s.FormattedMessage,{id:"currency"})}),(0,u.jsx)(i.Td,{borderBottomColor:"transparent",fontSize:"xs",fontWeight:"bold",children:null===(n=t.cells[1])||void 0===n?void 0:n.value})]}),(0,u.jsxs)(i.Tr,{children:[(0,u.jsx)(i.Td,{borderBottomColor:"transparent",fontSize:"xs",fontWeight:"bold",color:"grey",children:(0,u.jsx)(s.FormattedMessage,{id:"limitLoan"})}),(0,u.jsx)(i.Td,{borderBottomColor:"transparent",fontSize:"xs",fontWeight:"bold",children:null===(o=t.cells[3])||void 0===o?void 0:o.value})]})]}):null]})},j=o(24586),v=function(e){var n=e.dataSets,o=void 0===n?[]:n,t=e.columns,a=void 0===t?[]:t,l=e.currency,d=e.id,m=c().useMemo((function(){return a}),[a]),p=c().useMemo((function(){return o}),[o]),h=(0,i.useMediaQuery)("(max-width: 768px)"),g=(0,x.Z)(h,1)[0],v=(0,f.useTable)({columns:m,data:p},f.useFilters),y=v.getTableProps,C=v.getTableBodyProps,w=v.headerGroups,T=v.rows,B=v.prepareRow,S=v.setFilter,Z=c().useState(""),L=(0,x.Z)(Z,2),F=L[0],H=L[1],A=(0,s.useIntl)().formatMessage;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)(i.Flex,{justifyContent:"space-between",flexDirection:"row",flexWrap:"wrap",marginY:"6",alignItems:"center",children:[(0,u.jsx)("div",{children:"IDR"!==l?(0,u.jsx)(i.Text,{color:"grey",children:(0,u.jsx)(s.FormattedMessage,{id:"tableLegend"})}):null}),(0,u.jsx)(i.Flex,{w:g?"100%":"initial",alignItems:"center",flexWrap:g?"wrap":"nowrap",children:(0,u.jsx)(j.Z,{id:"".concat(d,"-search-account-number"),placeHolder:"Cari Rekening...",value:F,onChange:function(e){H(e),S("accountNo",(function(){return e}))}})})]}),(0,u.jsx)(i.TableContainer,{maxHeight:"300",overflowY:"scroll",children:(0,u.jsxs)(i.Table,(0,r.Z)((0,r.Z)({},y()),{},{children:[(0,u.jsx)(i.Thead,{children:w.map((function(e){return(0,u.jsxs)(i.Tr,(0,r.Z)((0,r.Z)({},e.getHeaderGroupProps()),{},{children:[e.headers.map((function(e){return!g||e.Header!==A({id:"limitLoan"})&&e.Header!==A({id:"currency"})?(0,u.jsx)(i.Th,(0,r.Z)((0,r.Z)({},e.getHeaderProps()),{},{borderBottom:"1px",borderBottomColor:"orange.100",children:e.render("Header")})):null})),g&&(0,u.jsx)(i.Th,{borderBottom:"1px",borderBottomColor:"orange.100"})]}))}))}),(0,u.jsx)(i.Tbody,(0,r.Z)((0,r.Z)({},C()),{},{children:T.map((function(e){return B(e),(0,u.jsx)(b,{row:e})}))}))]}))})]})},y=function(e){var n,o=e.data,a=e.currency,l=e.id,m=(0,s.useIntl)().formatMessage,x=c().useMemo((function(){return o.details.summary.find((function(e){return e.currency.toUpperCase()===a}))}),[a]);m({id:"all",defaultMessage:"All"}),null===x||void 0===x||x.balance,null===x||void 0===x||x.localBalance,null===x||void 0===x||x.percentage,null===x||void 0===x||x.totalAccount;return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(i.Wrap,{justifyContent:"flex-end",children:[{type:"Total ".concat(m({id:"allLoansUsed"})),amount:(0,d.a6)(null===x||void 0===x?void 0:x.balance),conversionAmount:(0,d.a6)(null===x||void 0===x?void 0:x.localBalance),totalAccount:"".concat(null===x||void 0===x?void 0:x.totalAccount," ").concat(m({id:"account"}))},{type:"Total ".concat(m({id:"limitLoan"})),amount:(0,d.a6)(null===x||void 0===x?void 0:x.details.availableBalance),conversionAmount:(0,d.a6)(null===x||void 0===x?void 0:x.details.availableBalanceLocal)}].map((function(e,n){return(0,u.jsx)(c().Fragment,{children:(0,u.jsx)(h,(0,r.Z)({currency:a},e))},n)}))}),(0,u.jsx)(v,{id:l,currency:a,columns:[{accessor:"accountNo",Header:m({id:"accountNo"})},{accessor:"currency",Header:m({id:"currency"})},{accessor:"usedLoan",Header:m({id:"usedLoan"})},{accessor:"loanLimit",Header:m({id:"limitLoan"})}],dataSets:(0,t.Z)((null===x||void 0===x||null===(n=x.accounts)||void 0===n?void 0:n.map((function(e){return{accountNo:e.account,currency:a,usedLoan:(0,d.a6)(e.outstandingAmount),loanLimit:(0,d.a6)(e.availableBalance)}})))||[])})]})},C=function(e){var n=e.onClose,o=e.id;return(0,u.jsx)("div",{children:(0,u.jsxs)(i.Flex,{children:[(0,u.jsx)(s.FormattedMessage,{id:"detailTitle"}),(0,u.jsx)(i.Spacer,{}),(0,u.jsx)(i.IconButton,{id:"".concat(o,"-close-btn"),variant:"ghost",padding:0,icon:(0,u.jsx)(i.Icon,{as:g.q5L,fontSize:"lg"}),"aria-label":"close-button",color:{base:"black",md:"orange.500"},onClick:function(){return n()}})]})})},w=function(e){var n=e.isOpen,o=e.onClose,t=e.selectedData,r=e.data,a=e.id;return(0,u.jsx)(p.Z,{id:"".concat(a,"-modal-detail"),size:"4xl",isOpen:n,onClose:o,withCloseButton:!1,header:(0,u.jsx)(C,{id:"".concat(a,"-modal-detail"),onClose:o}),body:(0,u.jsx)(y,{id:"".concat(a,"-modal-detail"),data:r,currency:t.currency})})},T=o(1896),B=o(90006),S=function(e){var n,o,t=e.headerGroups,r=e.rows,a=e.onOpen,l=e.setSelectedData,c=e.isHomepage,m=e.id,x=(0,s.useIntl)();return(0,u.jsxs)(u.Fragment,{children:[!c&&(0,u.jsx)(i.Grid,{templateColumns:"6fr 6fr",pb:"1",borderBottom:"1px",borderBottomColor:"orange.100",children:null===(n=t[0])||void 0===n||null===(o=n.headers)||void 0===o?void 0:o.map((function(e,n){if("currency"===e.id||"balance"===e.id)return(0,u.jsx)(i.Box,{fontSize:12,color:"gray.500",children:e.render("Header")},n)}))}),(0,u.jsx)(i.Accordion,{id:"".concat(m,"-accordion"),allowToggle:!0,borderColor:"orange.100",pointerEvents:c?"none":"initial",children:0===r.length?(0,u.jsx)(i.Flex,{alignItems:"center",justifyContent:"center",w:"100%",h:"20",children:(0,u.jsx)(i.Text,{fontSize:12,color:"gray.400",fontStyle:"italic",children:"No Data"})}):(0,u.jsx)(u.Fragment,{children:r.map((function(e,n){var o,r;return(0,u.jsxs)(i.AccordionItem,{id:"".concat(m,"-accordion-item-").concat((0,T.R)(e.values.currency)),borderBottom:"1px",borderBottomColor:"orange.100",children:[(0,u.jsx)(i.AccordionButton,{id:"".concat(m,"-accordion-item-").concat((0,T.R)(e.values.currency),"-btn"),px:0,py:2,children:(0,u.jsxs)(i.Grid,{textAlign:"left",w:"full",templateColumns:"4fr 4fr",fontSize:14,children:[(0,u.jsxs)(i.Flex,{alignItems:"center",children:[(0,u.jsx)(i.Box,{width:"14px",height:"14px",marginRight:2,rounded:"full",bgColor:e.values.color}),(0,u.jsx)(i.Text,{children:e.values.currency})]}),(0,u.jsxs)(i.Flex,{justifyContent:"space-between",children:[(0,u.jsx)(i.Box,{fontWeight:700,ml:c?"auto":0,children:(0,d.a6)(e.values.balance)}),!c&&(0,u.jsx)(i.AccordionIcon,{color:"orange.500"})]})]})}),(0,u.jsx)(i.AccordionPanel,{px:0,children:(0,u.jsxs)(i.Flex,{flexDirection:"column",children:[null===(o=t[0])||void 0===o||null===(r=o.headers)||void 0===r?void 0:r.map((function(n,o){if("currency"!==n.id&&"balance"!==n.id&&"color"!==n.id)return(0,u.jsxs)(i.Grid,{textAlign:"left",w:"full",templateColumns:"4fr 4fr",mb:"2",children:[(0,u.jsx)(i.Box,{fontSize:12,color:"gray.500",children:n.render("Header")},o),(0,u.jsx)(i.Box,{fontSize:14,children:"localBalance"===n.id?(0,d.a6)(e.values[n.id]):"percentage"===n.id?(0,B.r)(e.values[n.id]):e.values[n.id]})]},o)})),(0,u.jsx)(i.Box,{ml:"auto",children:(0,u.jsx)(i.Text,{id:"".concat(m,"-accordion-item-").concat((0,T.R)(e.values.currency),"-see-detail-btn"),onClick:function(){l(e.values),a()},fontWeight:"bold",fontSize:14,cursor:"pointer",color:"orange.500",children:x.formatMessage({id:"detail"})})})]})})]},"".concat(n,"-Accordion"))}))})})]})},Z=function(e){var n=e.columns,o=void 0===n?[]:n,t=e.datasets,r=void 0===t?[]:t,a=e.data,s=e.isHomepage,d=e.id,m=(0,i.useDisclosure)(),p=m.isOpen,h=m.onClose,g=m.onOpen,b=((0,i.useBreakpoint)(),c().useMemo((function(){return o}),[o])),j=c().useMemo((function(){return r}),[r]),v=c().useState({}),y=(0,x.Z)(v,2),C=y[0],T=y[1],B=(0,f.useTable)({columns:b,data:j},f.useSortBy),Z=B.headerGroups,L=B.rows,F=B.setSortBy;return(0,l.useEffect)((function(){F([{id:"percentage",desc:!0}])}),[j]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(w,{id:d,data:a,isOpen:p,onClose:h,selectedData:C,datasets:j}),(0,u.jsx)(S,{id:"".concat(d,"-table"),onOpen:g,headerGroups:Z,setSelectedData:T,rows:L,isHomepage:s})]})},L=o(33438),F=o(6875),H=o(66866),A=o.n(H),I=o(76291),M=o.n(I)()((function(e){return{balanceLocal:"0",details:{summary:[]},addSummaryLoanCif:function(n){return e((function(e){return(0,r.Z)((0,r.Z)({},e),n)}))},resetSummaryLoanCif:function(){return e((function(e){return(0,r.Z)((0,r.Z)({},e),{},{balanceLocal:"0",details:{summary:[]}})}))}}})),z=o(10190);F.Chart.register(F.ArcElement,F.Tooltip,F.Legend,F.Title);var W=function(e){var n=e.id,o=M((function(e){return{details:e.details}}),z.Z).details,t={labels:o.summary.map((function(e){return e.currency})),datasets:[{data:o.summary.map((function(e){return Number(e.percentage)})),backgroundColor:o.summary.map((function(e){return e.color}))}]};return(0,u.jsx)(i.Box,{maxW:400,maxH:400,children:0===o.summary.length?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(i.Flex,{alignItems:"center",justifyContent:"center",w:"100%",h:"20",children:(0,u.jsx)(i.Text,{fontSize:12,color:"gray.400",fontStyle:"italic",children:"No Data"})})}):(0,u.jsx)(L.Doughnut,{data:t,options:{elements:{arc:{borderWidth:0}},plugins:{legend:{display:!1},tooltip:{enabled:!1,external:function(e){var t=document.getElementById("".concat(n,"-tooltip"));t||((t=document.createElement("div")).id="".concat(n,"-tooltip"),t.innerHTML="<table></table>",document.body.appendChild(t));var r=e.tooltip;if(0!==r.opacity){if(t.classList.remove("above","below","no-transform"),r.yAlign?t.classList.add(r.yAlign):t.classList.add("no-transform"),r.body){var a,i="<tbody>",l=r.dataPoints[0].dataIndex,c=r.dataPoints[0].dataset.backgroundColor[l],s=r.dataPoints[0].label,u=Number(r.dataPoints[0].raw),m=null===(a=o.summary[l])||void 0===a?void 0:a.balance,x="background: white";x+="; position : relative",x+="; padding : 8px 16px",x+="; border-radius : 8px",x+="; border-color : "+c,x+="; border-width: 1px",x+="; z-index : 2",i+='<tr>\n                      <td>\n                        <div style="'.concat(x+="; white-space : nowrap;",'" class="">\n                          <span style="color: ').concat(c,';font-weight:bold">').concat(s,'</span><br/>\n                          <span style="font-weight:bold">').concat((0,d.a6)(m),"</span><br/>\n                          <span>").concat((0,B.r)(u),"</span>\n                        </div>\n                      </td>\n                    </tr>");var f=t.querySelector("table");f&&(f.innerHTML=i)}var p=e.chart.canvas.getBoundingClientRect();t.style.opacity="1",t.style.position="absolute",t.style.left=p.left+window.pageXOffset+r.caretX+"px",t.style.top=p.top+window.pageYOffset-40+r.caretY+"px",t.style.padding=r.padding+"px "+r.padding+"px",t.style.pointerEvents="none"}else t.style.opacity="0"}},datalabels:{formatter:function(e,n){var o;return"".concat(null===(o=n.chart.data.labels)||void 0===o?void 0:o[n.dataIndex],"\n ").concat((0,B.r)(e))},textAlign:"center",font:{weight:"bold"},color:"white"}}},plugins:[A()]})})},D=o(30936),k=o(79032),P=o(31332),R=function(e){var n,o,l=e.cifNo,d=e.isHomepage,x=e.id,f=(0,a.useLocation)().pathname,p=(o={cifNo:l},(0,D.eZ)({path:"dashboardliabilities/summaryliabilitiescif",method:k.Ik.POST,body:o})).data,h=M((function(e){return e}),z.Z),g=h.addSummaryLoanCif,b=h.resetSummaryLoanCif,j=h.details;c().useEffect((function(){if(void 0===(null===p||void 0===p?void 0:p.content))return b();var e=(0,r.Z)((0,r.Z)({},p.content),{},{details:(0,r.Z)((0,r.Z)({},p.content.details),{},{summary:(0,t.Z)(p.content.details.summary.map((function(e,n){return(0,r.Z)((0,r.Z)({},e),{},{color:P.Cz[Number(n.toString()[0])]})})))})});return g(e)}),[p,l]);var v=(0,s.useIntl)().formatMessage;return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(i.Flex,{flexDirection:"column",children:[(0,u.jsx)(m,{balanceLocal:(null===p||void 0===p||null===(n=p.content)||void 0===n?void 0:n.balanceLocal)||"",isHomePage:d}),d&&(0,u.jsx)(i.Text,{fontSize:"sm",color:"gray.500",mb:3,textAlign:"right",children:(0,u.jsx)(s.FormattedMessage,{id:"tableLegend"})}),(0,u.jsxs)(i.Grid,{my:"4",templateColumns:{base:"1fr",md:null!==f&&void 0!==f&&f.split("/")[1]?"6fr 6fr":"1fr"},gap:4,children:[(0,u.jsx)(i.Box,{overflow:"hidden",children:(0,u.jsx)(Z,{id:"".concat(x,"-liabilities-summary"),data:null===p||void 0===p?void 0:p.content,columns:[{accessor:"currency",Header:v({id:"headerSummaryCurrency"})},{accessor:"balance",Header:v({id:"headerSummaryBalance"})},{accessor:"localBalance",Header:v({id:"headerSummaryLocalBalance"})},{accessor:"percentage",Header:v({id:"headerSummaryPercentage"})},{accessor:"color"}],datasets:j.summary,isHomepage:d})}),(null===f||void 0===f?void 0:f.split("/")[1])&&(0,u.jsx)(i.Box,{mx:"auto",children:(0,u.jsxs)(i.Box,{position:"sticky",top:"32",children:[(0,u.jsxs)(i.Text,{align:"center",fontWeight:"bold",mb:2,children:[(0,u.jsx)(s.FormattedMessage,{id:"titleAssetLoanGraph"})," (%)"]}),(0,u.jsx)(W,{id:"".concat(x,"-liabilities-summary-chart")})]})})]}),!d&&(0,u.jsx)(i.Text,{fontSize:"sm",color:"gray.500",mb:3,display:{base:"none",md:"initial"},children:(0,u.jsx)(s.FormattedMessage,{id:"tableLegend"})})]})})}}}]);