"use strict";(self.webpackChunkproject_bni_dashboard=self.webpackChunkproject_bni_dashboard||[]).push([[2370],{19591:function(e,t,n){var o=n(34148),i=n(6875),a=n(46759),d=n(33438),r=n(27303),l=n(43015),s=n(90148),c=n(46417);i.Chart.register(i.CategoryScale,i.LinearScale,i.PointElement,i.LineElement,i.Title,i.Tooltip,i.Legend);t.Z=function(e){var t,n,i=e.labels,u=e.inDatasets,p=void 0===u?[]:u,f=e.outDatasets,m=void 0===f?[]:f,v=e.dataSetsLabel,x=void 0===v?[]:v,b=e.id,h=(0,a.useMemo)((function(){var e,t,n,o;return{labels:i,datasets:[{label:x[0],data:p,backgroundColor:null===(e=r.O.teal)||void 0===e?void 0:e[500],borderColor:null===(t=r.O.teal)||void 0===t?void 0:t[500],pointStyle:"circle",pointRadius:5},{label:x[1],data:m,backgroundColor:null===(n=r.O.orange)||void 0===n?void 0:n[500],borderColor:null===(o=r.O.orange)||void 0===o?void 0:o[500],pointStyle:"circle",pointRadius:5}]}}),[i,p,m,x]),g=(0,a.useRef)(null),j={maintainAspectRatio:!1,plugins:{legend:{display:!1,labels:{usePointStyle:!0}},tooltip:{enabled:!1,external:function(e){var t=document.getElementById("".concat(b,"-tooltip"));t||((t=document.createElement("div")).id="".concat(b,"-tooltip"),t.innerHTML="<table></table>",document.body.appendChild(t));var n=e.tooltip;if(0!==n.opacity){if(t.classList.remove("above","below","no-transform"),n.yAlign?t.classList.add(n.yAlign):t.classList.add("no-transform"),n.body){var o="<tbody>",i=n.dataPoints[0].dataset.backgroundColor,a=Number((Number(n.dataPoints[0].raw)/1e6).toFixed(2)),d="background: white";d+="; position : relative",d+="; border-color:"+i,d+="; box-shadow : 0px 8px 16px -8px"+i,d+="; padding : 8px",d+="; border-radius : 8px",d+="; border : 1px solid "+i,d+="; border-width: 2px",d+="; z-index : 2",o+="<tr><td>"+('<span style="'+(d+="; white-space : nowrap;")+' class=""> IDR '+(0,l.a6)(a)+"</span>")+"</td></tr>",o+="</tbody>";var r=t.querySelector("table");r&&(r.innerHTML=o)}var s=e.chart.canvas.getBoundingClientRect();t.style.opacity="1",t.style.position="absolute",t.style.left=s.left+window.pageXOffset+10+n.caretX+"px",t.style.top=s.top+window.pageYOffset-10+n.caretY+"px",t.style.padding=n.padding+"px "+n.padding+"px",t.style.pointerEvents="none"}else t.style.opacity="0"}}},scales:{x:{grid:{display:!1,drawBorder:!1}},y:{grid:{drawBorder:!1,borderDash:[8,4]},ticks:{callback:function(e){return(0,l.a6)(Number(e)/1e6)}}}}},y=null===g||void 0===g||null===(t=g.current)||void 0===t||null===(n=t.legend)||void 0===n?void 0:n.legendItems;return(0,c.jsxs)(o.Box,{width:"95%",children:[(0,c.jsx)(o.Box,{height:320,children:(0,c.jsx)(d.Line,{options:j,data:h,ref:g})}),(0,c.jsx)(o.Flex,{flexDir:"row-reverse",mt:4,children:(0,c.jsx)(s.Z,{legend:y})})]})}},28842:function(e,t,n){n.d(t,{Z:function(){return s}});var o=n(34148),i=n(46759),a=n(85640),d=n(30936),r=n(1896),l=n(46417),s=function(e){var t=e.onSelectCIF,n=e.componentId,s=(0,d.eZ)({path:"dashboardasset/cifdroplist"}).data,c=(0,i.useMemo)((function(){return null===s||void 0===s?void 0:s.content}),[null===s||void 0===s?void 0:s.content]);(0,i.useEffect)((function(){c&&t(c[0].id)}),[c,t]);return(0,l.jsxs)(o.HStack,{width:"100%",maxWidth:{base:"100%",md:400},flexDirection:{base:"column",md:"row"},children:[(0,l.jsx)(o.Text,{whiteSpace:"nowrap",fontWeight:700,mr:{base:0,md:4},mb:{base:2,md:0},width:{base:"100%",md:"initial"},children:(0,l.jsx)(a.FormattedMessage,{id:"chooseCIF"})}),(0,l.jsx)(o.Select,{id:"".concat(n,"-select-cif"),onChange:function(e){t(e.target.value)},maxWidth:"100%",rootProps:{marginLeft:"0 !important"},children:null===c||void 0===c?void 0:c.map((function(e){var t=e.id,o=e.cifName;return(0,l.jsxs)("option",{value:t,id:"".concat(n,"-select-cif-option-").concat((0,r.R)(t),"-").concat((0,r.R)(o)),children:[t," - ",o]},t)}))})]})}},87758:function(e,t,n){var o=n(34148),i=(n(46759),n(85640)),a=n(46417);t.Z=function(e){var t=e.additionalTitle,n=e.subtitle,d=(0,i.useIntl)();return(0,a.jsxs)(a.Fragment,{children:[t&&(0,a.jsx)(o.Box,{pt:{base:2,md:2},children:(0,a.jsx)(o.Text,{fontSize:"sm",children:t})}),(0,a.jsx)(o.Box,{pt:{base:2,md:2},pb:{base:4,md:6},children:(0,a.jsx)(o.Text,{color:"gray.500",fontSize:"sm",children:n&&d.formatMessage({id:n})})})]})}},90148:function(e,t,n){var o=n(34148),i=n(85640),a=n(46417);t.Z=function(e){var t=e.legend,n=(0,i.useIntl)();return(0,a.jsx)(o.Stack,{direction:"row",spacing:2,children:null===t||void 0===t?void 0:t.map((function(e){return e.text&&(0,a.jsxs)(o.Stack,{bg:"gray.100",px:4,py:2,rounded:8,direction:"row",alignItems:"center",children:[(0,a.jsx)(o.Circle,{size:"16px",bg:e.fillStyle}),(0,a.jsx)(o.Text,{fontSize:"sm",children:n.formatMessage({id:e.text})})]},e.text)}))})}},12370:function(e,t,n){n.r(t),n.d(t,{default:function(){return h}});var o=n(70885),i=n(34148),a=n(46759),d=n(49924),r=n(85640),l=n(90076),s=n(30936),c=n(87758),u=n(1896),p=n(46417),f=function(e){var t=e.balanceInOutType,n=e.period,o=e.onSelectBalanceType,d=e.onSelectPeriod,f=e.id,m=(0,s.eZ)({path:"dashboardcashflow/balanceinouttype"}),v=m.data,x=m.isLoading,b=(0,l.d)().data,h=a.useMemo((function(){return null===v||void 0===v?void 0:v.content}),[null===v||void 0===v?void 0:v.content]),g=a.useMemo((function(){return null===b||void 0===b?void 0:b.content}),[null===b||void 0===b?void 0:b.content]);a.useEffect((function(){var e;h&&o(null===h||void 0===h||null===(e=h[0])||void 0===e?void 0:e.code)}),[h,o]),a.useEffect((function(){if(g){var e,t,n=g.find((function(e){return"ONE_MONTH"===e.code}));d(null!==(e=null===n||void 0===n?void 0:n.code)&&void 0!==e?e:null===g||void 0===g||null===(t=g[0])||void 0===t?void 0:t.code)}}),[g,d]);var j=(0,r.useIntl)();return(0,p.jsxs)(i.Flex,{display:{base:"grid",md:"flex"},justifyContent:"space-between",alignItems:"center",children:[(0,p.jsxs)(i.Box,{children:[(0,p.jsx)(i.Heading,{fontSize:{base:"lg",md:"2xl"},children:j.formatMessage({id:"TrendCashFlow"})}),(0,p.jsx)(c.Z,{additionalTitle:j.formatMessage({id:"TrendCashFlowSubtitle"}),subtitle:""})]}),(0,p.jsxs)(i.Flex,{display:{base:"grid",md:"flex"},alignItems:"center",justifyContent:"flex-end",mb:4,gridTemplateColumns:"repeat(2, 1fr)",gridGap:{base:4,md:6},width:{base:"full",md:"initial"},children:[(0,p.jsxs)(i.Flex,{display:{base:"grid",md:"flex"},direction:{base:"column",md:"row"},gap:{base:2,md:6},alignItems:"center",children:[(0,p.jsx)(i.Heading,{fontSize:"md",children:(0,p.jsx)(r.FormattedMessage,{id:"show"})}),(0,p.jsx)(i.Skeleton,{isLoaded:!x,children:(0,p.jsx)(i.Select,{id:"".concat(f,"-select-balance-type"),w:{base:"unset",md:"max-content"},value:t,onChange:function(e){return o(e.target.value)},children:null===h||void 0===h?void 0:h.map((function(e){return(0,p.jsx)("option",{value:e.code,id:"".concat(f,"-select-balance-type-option-").concat((0,u.R)(e.name)),children:(0,p.jsx)(r.FormattedMessage,{id:e.code})},e.code)}))})})]}),(0,p.jsxs)(i.Flex,{display:{base:"grid",md:"flex"},direction:{base:"column",md:"row"},gap:{base:2,md:6},alignItems:"center",children:[(0,p.jsx)(i.Heading,{fontSize:"md",children:(0,p.jsx)(r.FormattedMessage,{id:"period"})}),(0,p.jsx)(i.Select,{id:"".concat(f,"-select-period"),w:{base:"unset",md:"max-content"},value:n,onChange:function(e){return d(e.target.value)},children:null===g||void 0===g?void 0:g.map((function(e){return(0,p.jsx)("option",{id:"".concat(f,"-select-period-option-").concat((0,u.R)(e.name)),value:e.code,children:(0,p.jsx)(r.FormattedMessage,{id:e.code})},e.code)}))})]})]})]})},m=n(19591),v=function(e){var t=e.cifNo,n=void 0===t?null:t,r=e.id,l=a.useState(),s=(0,o.Z)(l,2),c=s[0],u=s[1],v=a.useState(),x=(0,o.Z)(v,2),b=x[0],h=x[1],g=(0,d.p)({cifNo:n,period:c,balanceInOutType:b,needGetChildCif:!1}).data,j=a.useMemo((function(){var e=null===g||void 0===g?void 0:g.content;return{labels:null===e||void 0===e?void 0:e.map((function(e){return e.barName})),inDatasets:null===e||void 0===e?void 0:e.map((function(e){return e.balanceIn})),outDatasets:null===e||void 0===e?void 0:e.map((function(e){return e.balanceOut}))}}),[g]);return(0,p.jsxs)(i.Box,{bg:"white",rounded:"xl",p:6,children:[(0,p.jsx)(f,{id:"".concat(r,"-cashflow-trend"),period:c,balanceInOutType:b,onSelectPeriod:u,onSelectBalanceType:h}),(0,p.jsx)(m.Z,{id:"".concat(r,"-cashflow-trend-chart"),labels:j.labels,dataSetsLabel:["CashIn","CashOut"],inDatasets:j.inDatasets,outDatasets:j.outDatasets})]})},x=n(28842),b=n(30341),h=function(){var e=a.useState(""),t=(0,o.Z)(e,2),n=t[0],d=t[1],l=(0,r.useIntl)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.Container,{maxW:"full",pt:{base:"7",md:"10"},px:{base:5,md:12},children:(0,p.jsx)(b.Z,{id:"cashflow-page",title:l.formatMessage({id:"TrendCashFlow"}),controlComponent:(0,p.jsx)(x.Z,{componentId:"cashflow-page",onSelectCIF:d})})}),(0,p.jsx)(i.Container,{maxW:"full",px:{base:0,md:12},pb:48,children:(0,p.jsx)(i.Box,{w:"100%",maxH:320,children:(0,p.jsx)(v,{id:"cashflow-page",cifNo:n})})})]})}},90076:function(e,t,n){n.d(t,{d:function(){return i}});var o=n(30936),i=function(){return(0,o.eZ)({path:"dashboardasset/getdashboardperiod"})}},49924:function(e,t,n){n.d(t,{p:function(){return a}});var o=n(30936),i=n(79032),a=function(e){return(0,o.eZ)({path:"dashboardcashflow/cashflow",method:i.Ik.POST,body:e})}},43015:function(e,t,n){n.d(t,{VG:function(){return i},a6:function(){return a},uf:function(){return o}});var o=function(e){try{if(!e)return"0";var t=Number(e);if("number"===typeof t)return t.toLocaleString()}catch(n){return console.log("Format Number Error"+n),"0"}},i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:/\.00/g;return e.replace(t,"")},a=function(e,t){var n;if(!e&&"0"!==(null===(n=e)||void 0===n?void 0:n.toString()))return"0";e=String(e);var o=function(e,t){var n=new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(Number(e)||0).replaceAll("Rp","");return null!==t&&void 0!==t&&t.limited?"".concat(n.slice(0,-3),".."):n},i=String(e);return e.length>=((null===t||void 0===t?void 0:t.maxLimit)||9)&&null!==t&&void 0!==t&&t.limited?o(i=e.slice(0,7),t):o(i)}}}]);